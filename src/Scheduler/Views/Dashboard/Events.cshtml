@using Microsoft.AspNetCore.Identity;
@using Scheduler.Domain.Repositories;
@using Scheduler.Domain.Specifications;
@using Scheduler.Infrastructure.Persistence;
@using System.Text;

<div class="text-center mb-3 mt-3 noPrintIfModal">
	@if (this.User.IsInRole(Role.ADMIN))
	{
		<div class="row">
			<div class="col-md text-end">
				<a asp-controller="Schedule" asp-action="" class="btn btn-sm btn-primary rounded">
					Schedule New Event
				</a>
			</div>
			<div class="col-md text-start">
				<a asp-controller="Schedule" asp-action="CloseFacility" class="btn btn-sm btn-danger rounded text-start">
					Close Facility
				</a>
			</div>
		</div>
	}
	else
	{
		<div>
			<a asp-controller="Schedule" asp-action="" class="btn btn-sm btn-primary rounded">
				Schedule New Event
			</a>
		</div>
	}
	<div class="row mt-3">
		<div class="col-md text-end">
			<button class="btn btn-sm btn-secondary" onclick="gamesModal()">
				My Scheduled Games <i class="bi bi-question-circle" data-bs-toggle="tooltip" data-bs-placement="top" title="Bring up a List of Scheduled Games for all of Your Teams."></i></button>
		</div>
	<div>
		<a asp-controller="Schedule" asp-action="" class="btn btn-sm btn-primary rounded">
			Schedule New Event
		</a>
	</div>
	<div class="mt-3">
			<button class="btn btn-sm btn-secondary mb-2" onclick="gamesModal()">
				My Scheduled Games <i class="bi bi-question-circle calendar-full" data-bs-toggle="tooltip" data-bs-placement="top" title="Bring up a list of Scheduled Games for all of your teams."></i>
			</button>
		<button class="btn btn-sm btn-success mb-2" onclick="practicesModal()">
				My Scheduled Practices <i class="bi bi-question-circle calendar-full" data-bs-toggle="tooltip" data-bs-placement="top" title="Bring up a list of Scheduled Practices for all of your teams."></i>
			</button>
	</div>
</div>
</div>
			
			
<div id="eventModal"></div>

<div id="calendar">
	@await this.Component.InvokeAsync("Calendar")
</div>

<script>
	function gamesModal() {
		$.ajax({
			url: '@this.Url.Action("coachEvents", "Dashboard")',
			data: {
				type: 'Game'
			},
			success: function(data) {
				$("#eventModal").html(data);
			}
		});
	}
	function practicesModal() {
		$.ajax({
			url: '@this.Url.Action("coachEvents", "Dashboard")',
			data: {
				type: 'Practice'
			},
			success: function(data) {
				$("#eventModal").html(data);
			}
		});
	}
</script>